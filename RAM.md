Статистика VSZ и RSS
===============
## WEB1

####  VSZ
```
USER     VSZ  	 RSS	COMMAND
http 	811M 	62M 	php-fpm: pool wwwsed
http	799M 	54M 	php-fpm: pool wwwsed
root 	765M 	16M 	/usr/sbin/rsyslogd -n
http 	762M 	73M 	php-fpm: pool wwwsed
http 	757M 	76M 	php-fpm: pool wwwsed
http	755M 	72M 	php-fpm: pool wwwsed
http	755M 	72M 	php-fpm: pool wwwsed
http	751M 	72M 	php-fpm: pool wwwsed
http	751M 	69M 	php-fpm: pool wwwsed
```
#### RSS
```
USER     VSZ   RSS 	 COMMAND
http  	1216M 1193M	 /opt/mozjpeg/bin/jpegtran -copy none -optimize -progressive -outfile /var/www/sedmsk-10.6/tmp-project/optimpHO7 /var/www/sedmsk-10.6/tmp-project/pdfBuildertPygjZ.jpg
http  	698M 99M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php pagejpeg
http  	696M 96M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php pagejpeg
root 	203M 93M 	/usr/lib/systemd/systemd-journald
http 	675M 76M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php pagejpeg
http 	663M 75M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php converter
http 	753M 72M 	php-fpm: pool wwwsed
http 	671M 72M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php pagejpeg
http 	668M 70M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php pagejpeg
```

## WEB2

#### VSZ
```
USER   	VSZ   	RSS  	COMMAND
root	2640M 	728M 	/opt/kaspersky/kesl/libexec/kesl
root	1858M 	32M 	/opt/kaspersky/klnagent64/sbin/klnagent -d -from_wd
http	1026M 	506M	/opt/f2search/bin/f2d /etc/sysconfig/f2d.json
http	756M 	64M  	php-fpm: pool wwwsed
http	756M 	70M  	php-fpm: pool wwwsed
http	755M 	70M  	php-fpm: pool wwwsed
http	754M 	69M  	php-fpm: pool wwwsed
http	753M 	69M  	php-fpm: pool wwwsed
http	753M 	66M  	php-fpm: pool wwwsed
```
#### RSS
```
USER    VSZ   	RSS  	COMMAND
root 	2640M 	732M	/opt/kaspersky/kesl/libexec/kesl
http  	1026M 	506M	/opt/f2search/bin/f2d /etc/sysconfig/f2d.json
root 	291M 	162M 	/usr/lib/systemd/systemd-journald
root 	718M 	92M  	/usr/sbin/rsyslogd -n
http  	753M 	71M  	php-fpm: pool wwwsed
http  	753M 	70M  	php-fpm: pool wwwsed
http  	755M 	70M  	php-fpm: pool wwwsed
http  	750M 	67M  	php-fpm: pool wwwsed
http  	750M 	67M  	php-fpm: pool wwwsed
```

## WEB3

#### VSZ
```
USER	VSZ   	RSS	 COMMAND
http  	7058M 	8M  	java -jar /var/www/sedmsk-10.6//bin/pdftoolkit/pdftoolkit.jar -output /var/www/sedmsk-10.6/tmp-project/pdfBuilderbncZD0.pdf
http  	7058M 	8M  	java -jar /var/www/sedmsk-10.6//bin/pdftoolkit/pdftoolkit.jar -output /var/www/sedmsk-10.6/tmp-project/pdfBuilderdPBRar.pdf
root  	2985M 	1038M  	/opt/kaspersky/kesl/libexec/kesl
root 	1849M 	31M  	/opt/kaspersky/klnagent64/sbin/klnagent -d -from_wd
http  	814M 	67M 	php-fpm: pool wwwsed
http  	810M 	82M 	php-fpm: pool wwwsed
http  	798M 	51M 	php-fpm: pool wwwsed
http  	759M 	69M 	php-fpm: pool wwwsed
http  	756M 	62M 	php-fpm: pool wwwsed
```
#### RSS
```
USER    VSZ   	RSS 	COMMAND
root 	2952M 	1006M 	/opt/kaspersky/kesl/libexec/kesl
http  	681M 	81M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php pagejpeg
http 	665M 	78M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php converter
http 	671M 	72M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php pagejpeg
http 	755M 	72M  	php-fpm: pool wwwsed
http 	754M 	71M  	php-fpm: pool wwwsed
http 	671M 	71M 	/usr/bin/php /var/www/doc.tatar.ru/bin/event_queue.php pagejpeg
http 	753M 	70M  	php-fpm: pool wwwsed
http 	818M 	70M  	php-fpm: pool wwwsed
```

## WEB 4

#### VSZ
```
USER	VSZ	RSS  	COMMAND
http 	1005M 	543M	/opt/f2search/bin/f2d /etc/sysconfig/f2d.json
http 	814M 	63M  	php-fpm: pool wwwsed
http 	767M 	84M  	php-fpm: pool wwwsed
http 	763M 	79M  	php-fpm: pool wwwsed
http 	762M 	75M  	php-fpm: pool wwwsed
http 	756M 	72M  	php-fpm: pool wwwsed
http 	754M 	70M  	php-fpm: pool wwwsed
http 	753M 	68M  	php-fpm: pool wwwsed
http 	753M 	71M  	php-fpm: pool wwwsed
```
#### RSS
```
USER  	VSZ   	RSS 	COMMAND
http  	1005M 	543M	/opt/f2search/bin/f2d /etc/sysconfig/f2d.json
root 	299M 	181M	/usr/lib/systemd/systemd-journald
root 	709M 	103M 	/usr/sbin/rsyslogd -n
http  	767M 	83M  	php-fpm: pool wwwsed
http  	761M 	78M  	php-fpm: pool wwwsed
http  	756M 	71M  	php-fpm: pool wwwsed
http  	751M 	70M  	php-fpm: pool wwwsed
http  	753M 	70M  	php-fpm: pool wwwsed
http  	754M 	70M  	php-fpm: pool wwwsed
```


#### VIRT/VSZ — Виртуальный образ

Общее количество памяти, занимаемая процессом. Оно включает в себя весь код, данные, общие библиотеки, страницы которые были перемещены на диск, а также страницы, которые проецировались ядром, но не были использованы.

Таким образом VIRT это всё, что используется процессом.

#### RES/RSS — Резидентная память

Память RSS [resident set size] это область, которая не выгружена на диск и находится в оперативной памяти.

RES, возможно, лучше отображает реальное использование памяти процессора чем  VIRT, но нужно иметь ввиду:

- Туда не включена память, выгруженная на диск
- Некоторая память может быть совместно используемой несколькими процессами


## WEB1
```
              total        used        free      shared     buffers       cache   available
Mem:            23G        1,7G        375M        244M          0B         21G         20G
Swap:          1,0G        2,3M        1,0G
```
## WEB2
```
              total        used        free      shared     buffers       cache   available
Mem:            23G        2,3G        220M         82M          0B         20G         20G
Swap:          1,0G         10M        1,0G
```
## WEB3
```
              total        used        free      shared     buffers       cache   available
Mem:            23G        2,6G        338M        241M          0B         20G         20G
Swap:          1,0G        5,0M        1,0G
```
## WEB4
```
              total        used        free      shared     buffers       cache   available
Mem:            23G        1,6G        265M         84M          0B         21G         21G
Swap:          1,0G        2,3M        1,0G
```
Строки:

**Mem** – физическая память
**Swap** – виртуальная память

Колонки:

**total **– общий размер ОЗУ
**used **– реально использующая в данный момент и зарезервированная системой память
**free **– свободная память (total - used)
**shared** – разделяемая память
**buffers** – буферы в памяти – страницы памяти, зарезервированные системой для выделения их процессам, когда им это потребуется - эта память не может быть восстановлена до завершения записи.
**cached** – файлы, которые недавно были использованы системой/процессами и хранящиеся в памяти на случай, если они снова потребуются. Может быть немедленно восстановлен.
**available **- Оценка того, сколько памяти доступно для запуска новых приложений, без подкачки

в Linux системах память делится на активную и неактивную. Неактивная это та, что выделена процессу, но больше не используется им. Allocator ( выделятор ) оставляет эту память для дальнейшего использования, и не очищает её. Если данные расположенные в этой памяти понадобятся он их сразу вернет. Если же другому процессу, потребуется эта память и не будет "чистой памяти", то тогда будет распределятся неактивная память.

Другими словами, используется оптимизация, и данные без надобности не выкидываются из памяти, но при  необходимости, эта память будет выделена процессам. 

